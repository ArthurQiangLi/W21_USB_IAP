/**
  ******************************************************************************
  * @file    usbh_iap.h
  * @author  SeanLi
  * @version 
  * @date    29-December-2017
  * @brief   
  *
  *                      
  ******************************************************************************
  * @attention
  *
  *
  ******************************************************************************
  */

/*******************************************************************************
********************* Define to prevent recursive inclusion ********************
*******************************************************************************/
#ifndef _USBH_IAP_H
#define _USBH_IAP_H

/*******************************************************************************
************************************ Includes **********************************
*******************************************************************************/

#include "bsp_int.h"

/*******************************************************************************
********************************* Exported macro *******************************
*******************************************************************************/

#define USBH_IAP_DEBUG_LEVEL      3 

#if (USBH_IAP_DEBUG_LEVEL > 0)
#define	usbh_iap_err_log(...)   __disable_irq(); \
								printf("[usbh_iap_err]: "); \
								printf(__VA_ARGS__);  \
								printf("\n");\
								__enable_irq();
#else
#define	usbh_iap_err_log(...)   
#endif            
                            
#if (USBH_IAP_DEBUG_LEVEL > 1)
#define	usbh_iap_usr_log(...)   __disable_irq(); \
								printf("[usbh_iap_usr]: "); \
								printf(__VA_ARGS__);  \
								printf("\n");\
								__enable_irq();
#else
#define	usbh_iap_usr_log(...)   
#endif                         
                            
#if (USBH_IAP_DEBUG_LEVEL > 2)                         
#define	usbh_iap_dbg_log(...)   __disable_irq(); \
								printf("[usbh_iap_dbg]: "); \
								printf(__VA_ARGS__);  \
								printf("\n");\
								__enable_irq();
#else
#define	usbh_iap_dbg_log(...)                         
#endif


/*******************************************************************************
********************************* Exported types *******************************
*******************************************************************************/

typedef enum {
	USBH_IAP_END			= 0X00,
    USBH_IAP_APP1_MATCH,
	USBH_IAP_APP1_PROGRAM,
	USBH_IAP_APP1_VERIFY,
	USBH_IAP_ERROR
	
}usbh_iap_state_t;



/*******************************************************************************
******************************* Exported constants *****************************
*******************************************************************************/


/*******************************************************************************
******************************* Exported functions *****************************
*******************************************************************************/

bsp_u16				usbh_iap_boot(void);
usbh_iap_state_t 	usbh_iap_polling(void);

#endif /* _USBH_IAP_H */

/********************************* end of file ********************************/






